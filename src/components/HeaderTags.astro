---
import { useStoryblokApi } from "@storyblok/astro";
import classNames from "classnames";
import type { Tag } from "../types";
import { nameToSlug } from "../utils/nameToSlug";

const { class: className } = Astro.props;

const storyblokApi = useStoryblokApi();
const { data } = await storyblokApi.get("cdn/tags/", {
  startsWith: "blog-posts/",
  version: import.meta.env.DEV ? "draft" : "published",
});

const tags: Tag[] = data.tags;
---

<ul class={classNames("flex gap-4", className)}>
  {
    tags.map((tag) => (
      <li>
        <a href={`/my-blog/tags/${nameToSlug(tag.name)}`}>{tag.name}</a>
      </li>
    ))
  }
</ul>
